---
import Layout from "@layouts/Layout.astro";
---

<Layout>
  <main id="main-content">
    <section class="callback-section">
      <h1 class="callback-title">Processing Login</h1>
      <p class="callback-message">Please wait while we complete your login...</p>
    </section>
  </main>
</Layout>

<script>
  import { handleRedirectCallback } from '../utils/auth0Client';
  
  async function processCallback() {
    const user = await handleRedirectCallback();
    if (user) {
      window.location.href = '/admin';
    } else {
      window.location.href = '/login';
    }
  }
  
  processCallback();
</script>

<style>
  .callback-section {
    @apply flex min-h-[60vh] flex-col items-center justify-center py-12 text-center;
  }
  .callback-title {
    @apply mb-4 text-2xl font-bold;
  }
  .callback-message {
    @apply text-skin-base/70;
  }
</style> 